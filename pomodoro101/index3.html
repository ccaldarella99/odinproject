<!doctype html>
<html>
<head>
<style>
	.in-use {
		text-decoration:underline;
		font-weight:bold;
	}
	#wholeTimer {
		margin: 20px auto;
		padding: 25px;
		display: inline-block;
		align-text: center;
		border: 2px solid #999;
	}
	.row {
		display:flex;
		flex-wrap: wrap;
		padding:10px;
	}
	#btn {
		margin:10px 35px;
		box-shadow: 2px 2px #999;
		width:75px;
	}
	.spacing {
		padding: 5px;
	}
	#Timer {
		font-size:24px;
		padding: 10px 35px;
	}
</style>
</head>
<body>

<div id="wholeTimer">

	<div id="showTime"></div>
	<div class="row">
		<button id="btn" onclick="startStop()">Start</button>
	</div>
	<div id="Timer">25:00</div>

	<br>
	<div class="row">
		<div class="spacing">Work:</div><div class="spacing" id="time">25:00</div>
	</div>
	<div class="row">
		<div class="spacing">Break:</div><div class="spacing" id="break">5:00</div>
	</div>
	<div class="row">
		<div class="spacing">Long-Break:</div><div class="spacing" id="long-break">15:00</div>
	</div>

</div>

<script><!--
let z;
let isStarted = false;
let minutes = parseInt(document.getElementById('time').textContent.substring(0,2));
let seconds = parseInt(document.getElementById('time').textContent.substring(3,5));
let totalSeconds = (minutes*60) + seconds;
let isBreak = false;
let isBreakLong = false;
let countBreak = 1;
inUse('time');

function setTotalSeconds(stringTime) {
	document.getElementById('Timer').textContent = "0:00";
	let stringTimeToMinutes = parseInt(stringTime.substring(0,2));
	let stringTimeToSeconds = parseInt(stringTime.substring(3,5));
	let _ret = (stringTimeToMinutes*60) + stringTimeToSeconds + 1;
	return _ret
}

function setDisplayTime() {
	let displayMin = parseInt(totalSeconds/60);
	let displaySec = totalSeconds%60;
	let _ret = displayMin.toString() + ":" + padding(displaySec);
	return _ret;
}

function startStop() {
	if (isStarted) {
		stop();
		isStarted = false;
		document.getElementById('btn').textContent = "Start";
//		document.getElementById('showTime').textContent = "&#9658;";
	} else {
		z = setInterval(function(){ start() }, 1000);
		isStarted = true;
		document.getElementById('btn').textContent = "Pause";
//		document.getElementById('showTime').textContent = "&#9604;";
	}
}

function inUse(itemInUse) {
	document.getElementById('long-break').classList.remove('in-use');
	document.getElementById('break').classList.remove('in-use');
	document.getElementById('time').classList.remove('in-use');
	document.getElementById(itemInUse).classList.add('in-use');
}

function padding(inSeconds) {
	let _ret = inSeconds.toString();
	if(_ret.length == 1) {
		_ret = "0" + _ret;
	}
	return _ret;
}

function start() {
	let d = new Date();
	let time = d.getTime();
	
	if(totalSeconds > 1) {
		totalSeconds--;
		document.getElementById('Timer').textContent = setDisplayTime();
	} else {
		if(isBreak) {
			isBreak = false;
			countBreak++;
			if(countBreak > 4) {
				countBreak = 1;
			}
			totalSeconds = setTotalSeconds(document.getElementById('time').textContent);
			inUse('time');
		} else {
			isBreak = true;
			if(countBreak % 4 == 0) {
				isBreakLong = true;
			}
			if(!isBreakLong) {
				totalSeconds = setTotalSeconds(document.getElementById('break').textContent);
				inUse('break');
			} else {
				totalSeconds = setTotalSeconds(document.getElementById('long-break').textContent);
				inUse('long-break');
			}
		}
	}
}

function stop() {
	clearInterval(z);
}

--></script>
</body>
</html>